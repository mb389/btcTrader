<div id="container">

  <nvd3 options="vm.options" data="vm.data"></nvd3>
  <div class="info">
    <h2>Trade Controls</h2>
    BTC Spot: {{ vm.spot | currency }}
    <br><br>
    <form name="tradepanel" class="form-inline">
      <div class="form-group">
        <label for="quantity">Quantity</label>
          <input id="quantity"
            name="input"
            class="form-control"
            type="number"
            ng-model="vm.tradeQuantity"
            min="1"
            max="100"
            required>
      </div>
      <div class="form-group">
          <button class="btn btn-success" ng-disabled="!tradepanel.$valid" ng-click="vm.submitTrade(vm.tradeQuantity)">Buy</button>
      </div>
      <div class="form-group">
        <button class="btn btn-danger" ng-disabled="!tradepanel.$valid"
          ng-click="vm.submitTrade(-vm.tradeQuantity)">Sell</button>
      </div>
      <div class="form-group">
        <button class="btn btn-info"
          ng-click="vm.priceUpdate()">Refresh Prices/P&L</button>
      </div>
    </form>
    </div>
  </div>

  <div class="info">
    <div class="item">
      <h2>Positions</h2>
      {{ vm.position }} BTC worth {{ vm.position * vm.spot | currency }} @ {{ vm.spot | currency }} BTC/USD
    </div>
    <div class="item">
      <h2>P&L</h2>
      <div>Realized: {{ vm.realPNL | currency }}</div>
      <div>Unrealized: {{ vm.unrealPNL | currency }}</div>
      <div>NET: {{ vm.realPNL + vm.unrealPNL | currency }}</div>
    </div>
    <div class="item">
      <h2>Trade History</h2>
      <div ng-repeat="trade in vm.trades">
        {{trade.t.toString()}} : {{trade.q}} @ {{trade.px | currency}}
      </div>
    </div>
  </div>
</div>
